<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุนุจูุฑูููู Ultra Board</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    
    <!-- ุดุงุดุฉ ุงูููู -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <h2>๐ ุงุฎุชุฑ ุบุฑูุฉ</h2>
            <select id="roomIdInput" class="login-input">
                <option value="1">ุบุฑูุฉ 1</option>
                <option value="2">ุบุฑูุฉ 2</option>
                <option value="3">ุบุฑูุฉ 3</option>
                <option value="4">ุบุฑูุฉ 4</option>
            </select>
            <input type="text" id="usernameInput" placeholder="ุงุณูู" class="login-input">
            <select id="roleInput" class="login-input">
                <option value="student">๐จโ๐ ุทุงูุจ</option>
                <option value="teacher">๐จโ๐ซ ูุณุชุฑ</option>
            </select>
            <input type="password" id="teacherPasswordInput" placeholder="ูููุฉ ุณุฑ ุงููุณุชุฑ" class="login-input" style="display:none;">
            <button id="loginBtn" class="btn btn-primary">ุฏุฎูู</button>
            <p id="loginError" style="color: #ef4444; display: none; margin-top: 10px;"></p>
        </div>
    </div>

    <!-- ุฅุดุนุงุฑ -->
    <div id="notificationToast" class="notification-toast">๐ฌ ุฑุณุงูุฉ ุฌุฏูุฏุฉ</div>

    <!-- ูุงุฆูุฉ ุงูุณูุงู (ุงูุญุฐู) -->
    <div id="contextMenu" class="context-menu">
        <div id="deleteForMe">๐๏ธ ุญุฐู ูุฏู</div>
        <div id="deleteForEveryone">๐ฅ ุญุฐู ููุฌููุน</div>
    </div>

    <header id="toolsPanel" class="main-header">
        <div class="header-content">
            <div class="logo-area">
                <span class="app-title">Ultra Board</span>
                <span id="connectionStatus" class="status-dot online"></span>
                <button id="userCountBtn" class="user-count-btn">๐ฅ 0</button>
            </div>

            <div class="tools-scroll-area">
                <div class="tool-group">
                    <label>๐๏ธ ุงูููู</label>
                    <div id="penColors" class="color-row"></div>
                    <input type="color" id="customColor" class="mini-picker" title="ููู ูุฎุตุต">
                </div>

                <div class="tool-group">
                    <label>๐จ/๐ผ๏ธ ุฎูููุฉ</label>
                    <div id="bgColors" class="color-row"></div>
                    <button id="createPollBtn" class="icon-btn" title="ุฅูุดุงุก ุชุตููุช" style="display:none;">๐</button>
                    <button id="uploadImgBtn" class="icon-btn" title="ุฑูุน ุตูุฑุฉ">๐</button>
                    <input type="file" id="imgInput" accept="image/*" hidden>
                </div>

                <div class="tool-group">
                    <label>๐ ุงูุญุฌู (<span id="sizeDisplay">3</span>)</label>
                    <input type="range" id="brushSize" min="1" max="100" value="3">
                </div>

                <div class="tool-group">
                    <label>โจ ูููู</label>
                    <div id="neonColors" class="color-row"></div>
                </div>

                <div class="tool-group">
                    <label>ุฃุฏูุงุช</label>
                    <div class="cursor-options">
                        <button class="cursor-btn active" data-cursor="crosshair">๐ฏ</button>
                        <button class="cursor-btn" data-cursor="default">๐</button>
                        <button class="cursor-btn" data-cursor="grab" id="panBtn" title="ุชุญุฑูู">โ</button>
                        <button id="eraserBtn" class="cursor-btn" title="ููุญุงุฉ">๐งฝ</button>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="toggleChatBtn" class="btn btn-secondary">๐ฌ</button>
                <button id="undoBtn" class="btn btn-secondary" title="ุชุฑุงุฌุน ุนู ุขุฎุฑ ุฑุณูุฉ">โฉ๏ธ ุชุฑุงุฌุน</button>
                <button id="clearBtn" class="btn btn-danger">ูุณุญ</button>
            </div>
        </div>
        
        <button id="toggleMenuBtn" class="toggle-handle">
            <span class="arrow">โฒ</span>
        </button>
    </header>

    <main class="main-stage">
        <div id="canvasWrapper" class="canvas-wrapper">
            <canvas id="whiteboard"></canvas>
        </div>
    </main>

    <!-- ูุงุฆูุฉ ุงููุชุตููู -->
    <div id="usersPanel" class="users-panel closed">
        <div class="panel-header">
            <span>ุงููุชุตููู</span>
            <button id="closeUsersBtn">ร</button>
        </div>
        <div id="usersList" class="users-list"></div>
    </div>

    <!-- ูุงุฌูุฉ ุงูุดุงุช -->
    <div id="chatContainer" class="chat-container closed">
        <div class="chat-header">
            <span>ุงูุฏุฑุฏุดุฉ ุงูุญูุฉ</span>
            <button id="closeChat">ร</button>
        </div>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-area">
            <button id="chatImgBtn" class="icon-btn-small">๐ท</button>
            <input type="file" id="chatImgInput" accept="image/*" hidden>
            <input type="text" id="chatInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ...">
            <button id="sendChatBtn">โค</button>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุฅูุดุงุก ุงูุชุตููุช -->
    <div id="pollModal" class="modal closed">
        <div class="modal-content">
            <h3 style="color: #ffd700; margin-bottom: 15px;">๐ ุณุคุงู ุณุฑูุน</h3>
            <input type="text" id="pollQuestionInput" class="login-input" placeholder="ุงูุชุจ ุงูุณุคุงู ููุง..." style="width:90%; margin-bottom: 20px;">
            <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 15px;">
                <button id="startPollYesNo" class="btn btn-primary">ูุนู / ูุง</button>
                <button id="startPollABCD" class="btn btn-secondary">A / B / C / D</button>
            </div>
            <button id="closePollModal" class="btn btn-danger">ุฅูุบุงุก</button>
        </div>
    </div>

    <!-- ููุญุฉ ุงูุชุตููุช ุงููุดุท -->
    <div id="activePollPanel" class="poll-panel closed">
        <h4 id="pollQuestionDisplay" style="margin:0 0 15px 0; color:#ffd700; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;"></h4>
        <div id="pollOptionsContainer"></div>
        <button id="endPollBtn" class="btn btn-danger" style="width:100%; margin-top:15px; display:none;">ุฅููุงุก ุงูุชุตููุช</button>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>